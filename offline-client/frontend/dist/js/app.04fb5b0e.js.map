{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Users.vue?c752","webpack:///./src/components/WsStatusIndicator.vue?0a8b","webpack:///./src/store/index.js","webpack:///./src/services/ws.js","webpack:///./src/App.vue","webpack:///./src/components/WsStatusIndicator.vue","webpack:///src/components/WsStatusIndicator.vue","webpack:///./src/components/WsStatusIndicator.vue?1fbf","webpack:///./src/components/WsStatusIndicator.vue?fe1d","webpack:///src/App.vue","webpack:///./src/App.vue?03b3","webpack:///./src/App.vue?315a","webpack:///./src/views/Login.vue","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?62fc","webpack:///./src/views/Login.vue?24a5","webpack:///./src/views/Register.vue","webpack:///src/views/Register.vue","webpack:///./src/views/Register.vue?0d94","webpack:///./src/views/Register.vue?cae3","webpack:///./src/views/Dashboard.vue","webpack:///src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?0134","webpack:///./src/views/Dashboard.vue?0dc5","webpack:///./src/views/Users.vue","webpack:///src/views/Users.vue","webpack:///./src/views/Users.vue?8b79","webpack:///./src/views/Users.vue?9272","webpack:///./src/views/KeyGen.vue","webpack:///src/views/KeyGen.vue","webpack:///./src/views/KeyGen.vue?9c03","webpack:///./src/views/KeyGen.vue?7344","webpack:///./src/views/Sign.vue","webpack:///src/views/Sign.vue","webpack:///./src/views/Sign.vue?9a49","webpack:///./src/views/Sign.vue?50bd","webpack:///./src/views/Notifications.vue","webpack:///src/views/Notifications.vue","webpack:///./src/views/Notifications.vue?4d3d","webpack:///./src/views/Notifications.vue?d698","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/views/Register.vue?dcd0","webpack:///./src/views/Login.vue?af20","webpack:///./src/services/api.js","webpack:///./src/views/Dashboard.vue?4bd0","webpack:///./src/views/KeyGen.vue?9452","webpack:///./src/views/Sign.vue?3a04","webpack:///./src/App.vue?8288","webpack:///./src/views/Notifications.vue?4cba"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Vue","use","Vuex","Store","state","token","localStorage","getItem","user","JSON","parse","wsConnected","wsClient","notifications","currentSession","wsConnecting","wsReconnectTimer","wsReconnectAttempts","wsLastError","wsConnectionLostTime","getters","isLoggedIn","currentUser","userRole","role","isAdmin","isCoordinator","isParticipant","mutations","setToken","setItem","setUser","stringify","clearToken","removeItem","setWsConnected","connected","setWsClient","client","addNotification","notification","clearNotifications","setCurrentSession","session","setWsConnecting","connecting","setWsReconnectTimer","timer","setWsReconnectAttempts","attempts","incrementWsReconnectAttempts","setWsLastError","error","setWsConnectionLostTime","timestamp","actions","login","commit","startsWith","substring","logout","close","connectWebSocket","dispatch","console","log","readyState","WebSocket","OPEN","CONNECTING","clearTimeout","ws","connectionTimeout","setTimeout","delay","Math","min","pow","reconnectTimer","onopen","send","type","username","onclose","event","wasConnected","code","reason","Date","now","isNormalClosure","includes","onerror","message","resetWebSocketConnection","checkWebSocketHealth","warn","wsServiceInitialized","WS_MESSAGE_TYPES","REGISTER","REGISTER_COMPLETE","KEYGEN_REQUEST","KEYGEN_INVITE","KEYGEN_RESPONSE","KEYGEN_PARAMS","KEYGEN_RESULT","KEYGEN_COMPLETE","SIGN_REQUEST","SIGN_INVITE","SIGN_RESPONSE","SIGN_PARAMS","SIGN_RESULT","SIGN_COMPLETE","ERROR","wsConnectionStatus","reconnectAttempts","initWebSocketService","store","_messageHandlerInitialized","onmessage","async","parseError","possibleJsonStart","indexOf","jsonDepth","endPos","jsonPart","e","handleRegisterComplete","Message","info","coordinator","handleKeyGenParams","handleKeyGenComplete","address","handleSignParams","handleSignComplete","handleError","content","responded","resetWebSocketService","sendWSMessage","success","keygenResponse","mpcApi","keyGen","threshold","parties","total_parts","index","part_index","filename","Error","cpic","cpicResponse","seApi","getCPIC","cpicError","session_key","encrypted_shard","encryptedKey","MessageBox","alert","signResponse","sign","userName","signature","render","_vm","this","_c","_self","attrs","_e","staticRenderFns","staticClass","class","statusClass","statusText","on","toggleDisplayText","displayText","_v","_s","checkInterval","tokenWarning","computed","isConnected","$store","isConnecting","lastError","methods","checkAuthStatus","checkConnectionStatus","storeToken","hasToken","fixedToken","mounted","setInterval","beforeDestroy","clearInterval","component","components","WsStatusIndicator","slot","ref","loginForm","rules","model","callback","$$v","$set","expression","password","staticStyle","loading","handleLogin","required","trigger","$refs","validate","valid","response","userApi","userData","$router","$message","errorMsg","_error$response$data","_error$response$data2","registerForm","confirmPassword","email","handleRegister","validateConfirmPassword","rule","max","validator","register","_error$response","roleText","handleLogout","activeMenu","$route","path","$event","wsCheckInterval","wsErrorCount","lastWsReset","healthCheckInterval","mapGetters","pendingInvitations","filter","hasUnhandledNotifications","created","ensureWebSocketConnection","checkWsConnection","checkPendingNotifications","notificationCheckInterval","document","addEventListener","handleVisibilityChange","removeEventListener","hidden","resetWsConnection","then","$notify","title","duration","watch","newPath","newNotifications","directives","rawName","userList","scopedSlots","_u","fn","scope","row","newRole","updateUserRole","fetchUserList","getUsers","users","map","warning","keygenForm","keygenRules","totalParts","handleThresholdChange","participants","_l","availableParticipants","keygenLoading","handleKeyGenSubmit","validateParticipants","fetchAvailableParticipants","val","keygenApi","getAvailableUsers","status","createSession","sessionKey","signForm","signRules","fetchSignAvailableParticipants","handleSignThresholdChange","signAvailableParticipants","signLoading","handleSignSubmit","validateSignParticipants","signApi","getTagType","formatMsgType","toLocaleString","handleKeygenInviteAccept","handleKeygenInviteReject","handleSignInviteAccept","handleSignInviteReject","showMessageDetail","isInviteMessage","$alert","closeOnClickModal","typeMap","accept","markNotificationResponded","findIndex","VueRouter","routes","redirect","Login","meta","requiresAuth","Register","Dashboard","Users","requiresAdmin","KeyGen","requiresCoordinatorOrAdmin","Sign","Notifications","router","base","process","beforeEach","to","from","next","matched","some","record","config","productionTip","ElementUI","axios","defaults","baseURL","$axios","interceptors","Promise","reject","h","App","$mount","API_URL","MPC_URL","apiClient","timeout","request","headers","location","href","post","credentials","put","initiator","createSE"],"mappings":"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","file":"js/app.04fb5b0e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=style&index=0&id=beb5ce7e&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WsStatusIndicator.vue?vue&type=style&index=0&id=b517988e&prod&scoped=true&lang=css\"","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        token: localStorage.getItem('token') || '',\n        user: JSON.parse(localStorage.getItem('user')) || null,\n        wsConnected: false,\n        wsClient: null,\n        notifications: [],\n        currentSession: null,\n        wsConnecting: false,\n        wsReconnectTimer: null,\n        wsReconnectAttempts: 0,\n        wsLastError: null,\n        wsConnectionLostTime: null\n    },\n    getters: {\n        isLoggedIn: state => !!state.token,\n        currentUser: state => state.user,\n        userRole: state => state.user ? state.user.role : '',\n        isAdmin: state => state.user && state.user.role === 'admin',\n        isCoordinator: state => state.user && state.user.role === 'coordinator',\n        isParticipant: state => state.user && state.user.role === 'participant',\n        wsConnected: state => state.wsConnected,\n        notifications: state => state.notifications,\n        currentSession: state => state.currentSession\n    },\n    mutations: {\n        setToken(state, token) {\n            state.token = token\n            localStorage.setItem('token', token)\n        },\n        setUser(state, user) {\n            state.user = user\n            localStorage.setItem('user', JSON.stringify(user))\n        },\n        clearToken(state) {\n            state.token = ''\n            state.user = null\n            localStorage.removeItem('token')\n            localStorage.removeItem('user')\n        },\n        setWsConnected(state, connected) {\n            state.wsConnected = connected\n        },\n        setWsClient(state, client) {\n            state.wsClient = client\n        },\n        addNotification(state, notification) {\n            state.notifications.push(notification)\n        },\n        clearNotifications(state) {\n            state.notifications = []\n        },\n        setCurrentSession(state, session) {\n            state.currentSession = session\n        },\n        setWsConnecting(state, connecting) {\n            state.wsConnecting = connecting\n        },\n        setWsReconnectTimer(state, timer) {\n            state.wsReconnectTimer = timer\n        },\n        setWsReconnectAttempts(state, attempts) {\n            state.wsReconnectAttempts = attempts\n        },\n        incrementWsReconnectAttempts(state) {\n            state.wsReconnectAttempts++\n        },\n        setWsLastError(state, error) {\n            state.wsLastError = error\n        },\n        setWsConnectionLostTime(state, timestamp) {\n            state.wsConnectionLostTime = timestamp\n        }\n    },\n    actions: {\n        login({ commit }, user) {\n            const token = user.token && user.token.startsWith('Bearer ')\n                ? user.token.substring(7)\n                : user.token\n\n            commit('setToken', token)\n            commit('setUser', user.user)\n        },\n        logout({ commit, state }) {\n            if (state.wsClient) {\n                state.wsClient.close(1000, \"用户登出\")\n                commit('setWsClient', null)\n                commit('setWsConnected', false)\n            }\n\n            commit('setWsReconnectAttempts', 0)\n            commit('setWsConnecting', false)\n\n            commit('clearToken')\n        },\n        connectWebSocket({ commit, state, dispatch }) {\n            if (state.wsConnected || state.wsConnecting) {\n                console.log('WebSocket已连接或正在连接中，跳过连接请求')\n                return\n            }\n\n            commit('setWsConnecting', true)\n\n            if (state.wsClient) {\n                try {\n                    if (state.wsClient.readyState === WebSocket.OPEN ||\n                        state.wsClient.readyState === WebSocket.CONNECTING) {\n                        state.wsClient.close(1000, \"主动关闭以重新连接\")\n                    }\n                } catch (error) {\n                    console.error('关闭WebSocket连接出错:', error)\n                }\n            }\n\n            if (state.wsReconnectTimer) {\n                clearTimeout(state.wsReconnectTimer)\n                commit('setWsReconnectTimer', null)\n            }\n\n            try {\n                console.log('正在创建新的WebSocket连接...')\n                const ws = new WebSocket('ws://localhost:8081/ws')\n\n                const connectionTimeout = setTimeout(() => {\n                    if (ws.readyState !== WebSocket.OPEN) {\n                        console.error('WebSocket连接超时')\n                        ws.close(3000, \"连接超时\")\n                        commit('setWsConnecting', false)\n                        commit('setWsLastError', \"连接超时\")\n\n                        if (state.token && state.user) {\n                            const attempts = state.wsReconnectAttempts;\n                            const delay = Math.min(1000 * Math.pow(1.5, attempts), 30000);\n\n                            console.log(`连接超时，将在 ${delay / 1000} 秒后重新连接...`);\n\n                            const reconnectTimer = setTimeout(() => {\n                                commit('incrementWsReconnectAttempts');\n                                dispatch('connectWebSocket');\n                            }, delay);\n\n                            commit('setWsReconnectTimer', reconnectTimer);\n                        }\n                    }\n                }, 10000);\n\n                ws.onopen = () => {\n                    clearTimeout(connectionTimeout);\n                    console.log('WebSocket连接已建立')\n                    commit('setWsConnected', true)\n                    commit('setWsConnecting', false)\n                    commit('setWsReconnectAttempts', 0)\n                    commit('setWsLastError', null)\n\n                    if (state.user) {\n                        const token = state.token && state.token.startsWith('Bearer ')\n                            ? state.token.substring(7)\n                            : state.token\n\n                        ws.send(JSON.stringify({\n                            type: 'register',\n                            username: state.user.username,\n                            role: state.user.role,\n                            token: token\n                        }))\n                    }\n                }\n\n                ws.onclose = (event) => {\n                    clearTimeout(connectionTimeout);\n                    const wasConnected = state.wsConnected;\n                    console.log('WebSocket连接已关闭', event.code, event.reason)\n                    commit('setWsConnected', false)\n                    commit('setWsConnecting', false)\n\n                    if (wasConnected) {\n                        commit('setWsConnectionLostTime', Date.now())\n                    }\n\n                    const isNormalClosure = event.code === 1000 && (\n                        event.reason.includes(\"用户登出\") ||\n                        event.reason.includes(\"主动关闭\")\n                    );\n\n                    if (!isNormalClosure && state.token && state.user) {\n                        const attempts = state.wsReconnectAttempts;\n                        const delay = Math.min(1000 * Math.pow(1.5, attempts), 30000);\n\n                        console.log(`WebSocket连接非正常关闭，将在 ${delay / 1000} 秒后尝试第 ${attempts + 1} 次重连...`);\n\n                        commit('setWsLastError', `连接关闭: 代码 ${event.code}, 原因: ${event.reason || \"未知\"}`);\n\n                        const reconnectTimer = setTimeout(() => {\n                            commit('incrementWsReconnectAttempts');\n                            dispatch('connectWebSocket');\n                        }, delay);\n\n                        commit('setWsReconnectTimer', reconnectTimer);\n                    }\n                }\n\n                ws.onerror = (error) => {\n                    console.error('WebSocket连接错误:', error)\n                    commit('setWsLastError', \"连接错误\")\n                }\n\n                commit('setWsClient', ws)\n            } catch (error) {\n                console.error('创建WebSocket连接失败:', error)\n                commit('setWsConnecting', false)\n                commit('setWsLastError', `连接创建失败: ${error.message || \"未知错误\"}`)\n\n                if (state.token && state.user) {\n                    const attempts = state.wsReconnectAttempts;\n                    const delay = Math.min(1000 * Math.pow(1.5, attempts), 30000);\n\n                    console.log(`创建连接失败，将在 ${delay / 1000} 秒后重新尝试...`);\n\n                    const reconnectTimer = setTimeout(() => {\n                        commit('incrementWsReconnectAttempts')\n                        dispatch('connectWebSocket')\n                    }, delay)\n\n                    commit('setWsReconnectTimer', reconnectTimer)\n                }\n            }\n        },\n\n        resetWebSocketConnection({ commit, dispatch, state }) {\n            console.log('重置WebSocket连接')\n\n            if (state.wsClient) {\n                try {\n                    if (state.wsClient.readyState === WebSocket.OPEN ||\n                        state.wsClient.readyState === WebSocket.CONNECTING) {\n                        state.wsClient.close(1000, \"重置连接\")\n                    }\n                } catch (error) {\n                    console.error('关闭WebSocket连接出错:', error)\n                }\n                commit('setWsClient', null)\n            }\n\n            if (state.wsReconnectTimer) {\n                clearTimeout(state.wsReconnectTimer)\n                commit('setWsReconnectTimer', null)\n            }\n\n            commit('setWsConnected', false)\n            commit('setWsConnecting', false)\n            commit('setWsReconnectAttempts', 0)\n\n            if (state.token && state.user) {\n                setTimeout(() => {\n                    dispatch('connectWebSocket')\n                }, 1000)\n            }\n        },\n\n        checkWebSocketHealth({ dispatch, state }) {\n            if (!state.user || !state.token) {\n                return false\n            }\n\n            const ws = state.wsClient\n            if (!ws || ws.readyState !== WebSocket.OPEN) {\n                console.warn('WebSocket连接不正常，尝试重置...')\n                dispatch('resetWebSocketConnection')\n                return false\n            }\n\n            return true\n        }\n    }\n}) ","import store from '../store'\nimport { mpcApi, seApi } from './api'\nimport { MessageBox, Message } from 'element-ui'\n\n// 跟踪WebSocket服务初始化状态\nlet wsServiceInitialized = false;\n\n// WebSocket消息类型常量\nexport const WS_MESSAGE_TYPES = {\n    // 注册相关\n    REGISTER: 'register',\n    REGISTER_COMPLETE: 'register_complete',\n\n    // 密钥生成相关\n    KEYGEN_REQUEST: 'keygen_request',\n    KEYGEN_INVITE: 'keygen_invite',\n    KEYGEN_RESPONSE: 'keygen_response',\n    KEYGEN_PARAMS: 'keygen_params',\n    KEYGEN_RESULT: 'keygen_result',\n    KEYGEN_COMPLETE: 'keygen_complete',\n\n    // 签名相关\n    SIGN_REQUEST: 'sign_request',\n    SIGN_INVITE: 'sign_invite',\n    SIGN_RESPONSE: 'sign_response',\n    SIGN_PARAMS: 'sign_params',\n    SIGN_RESULT: 'sign_result',\n    SIGN_COMPLETE: 'sign_complete',\n\n    // 错误消息\n    ERROR: 'error'\n}\n\n// WebSocket连接参数常量\nconst WS_CONSTANTS = {\n    RECONNECT_INTERVAL: 2000,      // 初始重连时间间隔(2秒)\n    MAX_RECONNECT_INTERVAL: 30000, // 最大重连时间间隔(30秒)\n    RECONNECT_DECAY: 1.5,          // 重连时间递增系数\n    MAX_RECONNECT_ATTEMPTS: 10     // 最大重连尝试次数\n}\n\n// WebSocket连接状态\nlet wsConnectionStatus = {\n    connected: false,      // 是否已连接\n    connecting: false,     // 是否正在连接\n    reconnectAttempts: 0   // 重连尝试次数\n}\n\n// 初始化WebSocket服务\nexport function initWebSocketService() {\n    const ws = store.state.wsClient\n\n    if (!ws) {\n        console.error('WebSocket客户端未初始化')\n        return false\n    }\n\n    // 防止重复初始化\n    if (wsServiceInitialized && ws._messageHandlerInitialized) {\n        console.log('WebSocket消息处理已初始化，跳过')\n        return true\n    }\n\n    console.log('初始化WebSocket消息处理')\n\n    // 处理WebSocket消息\n    ws.onmessage = async (event) => {\n        try {\n            // 尝试解析消息内容\n            let message;\n            try {\n                message = JSON.parse(event.data);\n                console.log('收到WebSocket消息:', message);\n            } catch (parseError) {\n                console.error('WebSocket消息解析失败:', parseError);\n                console.error('收到的原始消息数据:', event.data);\n\n                // 尝试通过消息分隔来恢复\n                if (typeof event.data === 'string') {\n                    // 如果消息看起来包含多个JSON对象，尝试提取第一个有效的JSON\n                    const possibleJsonStart = event.data.indexOf('{');\n                    if (possibleJsonStart >= 0) {\n                        let jsonDepth = 0;\n                        let endPos = -1;\n\n                        // 简单扫描找到匹配的JSON结束位置\n                        for (let i = possibleJsonStart; i < event.data.length; i++) {\n                            if (event.data[i] === '{') jsonDepth++;\n                            else if (event.data[i] === '}') {\n                                jsonDepth--;\n                                if (jsonDepth === 0) {\n                                    endPos = i + 1;\n                                    break;\n                                }\n                            }\n                        }\n\n                        if (endPos > 0) {\n                            const jsonPart = event.data.substring(possibleJsonStart, endPos);\n                            try {\n                                message = JSON.parse(jsonPart);\n                                console.log('从损坏的消息中恢复JSON成功:', message);\n                            } catch (e) {\n                                console.error('恢复JSON失败:', e);\n                                return; // 放弃处理\n                            }\n                        }\n                    }\n                }\n\n                // 如果还是无法解析，则放弃处理此消息\n                if (!message) {\n                    return;\n                }\n            }\n\n            // 根据消息类型处理\n            switch (message.type) {\n                case WS_MESSAGE_TYPES.REGISTER_COMPLETE:\n                    handleRegisterComplete(message)\n                    break\n\n                case WS_MESSAGE_TYPES.KEYGEN_INVITE:\n                    // 不再自动弹窗，只添加通知\n                    console.log('收到密钥生成邀请:', message)\n                    Message.info(`收到来自 ${message.coordinator} 的密钥生成邀请，请在通知页面处理`)\n                    break\n\n                case WS_MESSAGE_TYPES.KEYGEN_PARAMS:\n                    await handleKeyGenParams(message)\n                    break\n\n                case WS_MESSAGE_TYPES.KEYGEN_COMPLETE:\n                    handleKeyGenComplete(message)\n                    break\n\n                case WS_MESSAGE_TYPES.SIGN_INVITE:\n                    // 不再自动弹窗，只添加通知\n                    console.log('收到签名邀请:', message)\n                    Message.info(`收到签名邀请，地址: ${message.address}，请在通知页面处理`)\n                    break\n\n                case WS_MESSAGE_TYPES.SIGN_PARAMS:\n                    await handleSignParams(message)\n                    break\n\n                case WS_MESSAGE_TYPES.SIGN_COMPLETE:\n                    handleSignComplete(message)\n                    break\n\n                case WS_MESSAGE_TYPES.ERROR:\n                    handleError(message)\n                    break\n\n                default:\n                    console.warn('未处理的WebSocket消息类型:', message.type)\n            }\n\n            // 将消息添加到通知列表\n            store.commit('addNotification', {\n                type: message.type,\n                content: message,\n                timestamp: new Date(),\n                responded: false // 添加响应状态标识\n            })\n        } catch (error) {\n            console.error('处理WebSocket消息出错:', error)\n        }\n    }\n\n    // 标记WebSocket实例已初始化消息处理器\n    ws._messageHandlerInitialized = true\n    wsServiceInitialized = true\n\n    return true\n}\n\n// 重置WebSocket消息处理服务\nexport function resetWebSocketService() {\n    wsServiceInitialized = false;\n\n    // 重置连接状态\n    wsConnectionStatus = {\n        connected: false,\n        connecting: false,\n        reconnectAttempts: 0\n    }\n}\n\n// 发送WebSocket消息\nexport function sendWSMessage(message) {\n    const ws = store.state.wsClient\n\n    if (!ws || ws.readyState !== WebSocket.OPEN) {\n        console.error('WebSocket未连接')\n        return false\n    }\n\n    try {\n        ws.send(JSON.stringify(message))\n        return true\n    } catch (error) {\n        console.error('发送WebSocket消息出错:', error)\n        return false\n    }\n}\n\n// 处理注册完成消息\nfunction handleRegisterComplete(message) {\n    if (message.success) {\n        store.commit('setWsConnected', true)\n        wsConnectionStatus.connected = true\n        wsConnectionStatus.reconnectAttempts = 0\n        console.log('WebSocket注册成功')\n        Message.success('WebSocket连接成功')\n    } else {\n        console.error('WebSocket注册失败:', message.message)\n        Message.error('WebSocket注册失败: ' + message.message)\n    }\n}\n\n// 处理密钥生成邀请\nasync function handleKeyGenInvite(message) {\n    try {\n        // 显示确认对话框\n        const confirm = await MessageBox.confirm(\n            `您收到密钥生成邀请，参与者索引: ${message.part_index}, 会话: ${message.session_key}, 发起者: ${message.coordinator}。是否接受?`,\n            '密钥生成邀请',\n            {\n                confirmButtonText: '接受',\n                cancelButtonText: '拒绝',\n                type: 'info'\n            }\n        ).catch(() => false)\n\n        // 获取当前用户的CPIC\n        const cpicResponse = await seApi.getCPIC()\n        const cpic = cpicResponse.data.cpic\n\n        // 发送响应\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.KEYGEN_RESPONSE,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            cpic: cpic,\n            accept: confirm !== false,\n            reason: confirm === false ? '用户拒绝' : ''\n        })\n    } catch (error) {\n        console.error('处理密钥生成邀请出错:', error)\n        // 发送拒绝响应\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.KEYGEN_RESPONSE,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            cpic: '',\n            accept: false,\n            reason: '处理邀请出错: ' + error.message\n        })\n    }\n}\n\n// 处理密钥生成参数\nasync function handleKeyGenParams(message) {\n    try {\n        const user = store.state.user.username\n        // 调用MPC服务进行密钥生成\n        const keygenResponse = await mpcApi.keyGen({\n            threshold: message.threshold,\n            parties: message.total_parts,\n            index: message.part_index,\n            filename: message.filename,\n            username: user\n        })\n\n        if (keygenResponse.data.success) {\n            // 尝试获取CPIC，即使出错也继续处理\n            let cpic = ''\n            try {\n                const cpicResponse = await seApi.getCPIC()\n                cpic = cpicResponse.data.cpic\n            } catch (cpicError) {\n                console.error('获取CPIC失败:', cpicError)\n            }\n\n            // 发送密钥生成结果\n            sendWSMessage({\n                type: WS_MESSAGE_TYPES.KEYGEN_RESULT,\n                session_key: message.session_key,\n                part_index: message.part_index,\n                address: keygenResponse.data.address,\n                cpic: cpic,\n                encrypted_shard: keygenResponse.data.encryptedKey,\n                success: true,\n                message: '密钥生成成功'\n            })\n\n            Message.success('密钥生成成功')\n        } else {\n            throw new Error('MPC服务密钥生成失败')\n        }\n    } catch (error) {\n        console.error('密钥生成失败:', error)\n        // 发送失败结果\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.KEYGEN_RESULT,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            address: '',\n            cpic: '',\n            encrypted_shard: '',\n            success: false,\n            message: '密钥生成失败: ' + error.message\n        })\n\n        Message.error('密钥生成失败: ' + error.message)\n    }\n}\n\n// 处理密钥生成完成消息\nfunction handleKeyGenComplete(message) {\n    if (message.success) {\n        MessageBox.alert(\n            `密钥生成成功! 地址: ${message.address}`,\n            '密钥生成完成',\n            { type: 'success' }\n        )\n    } else {\n        MessageBox.alert(\n            `密钥生成失败: ${message.message}`,\n            '密钥生成失败',\n            { type: 'error' }\n        )\n    }\n}\n\n// 处理签名邀请\nasync function handleSignInvite(message) {\n    try {\n        // 显示确认对话框\n        const confirm = await MessageBox.confirm(\n            `您收到签名邀请，参与者索引: ${message.part_index}, 会话: ${message.session_key}, 地址: ${message.address}。是否接受?`,\n            '签名邀请',\n            {\n                confirmButtonText: '接受',\n                cancelButtonText: '拒绝',\n                type: 'info'\n            }\n        ).catch(() => false)\n\n        // 获取当前用户的CPIC\n        const cpicResponse = await seApi.getCPIC()\n        const cpic = cpicResponse.data.cpic\n\n        // 发送响应\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.SIGN_RESPONSE,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            cpic: cpic,\n            accept: confirm !== false,\n            reason: confirm === false ? '用户拒绝' : ''\n        })\n    } catch (error) {\n        console.error('处理签名邀请出错:', error)\n        // 发送拒绝响应\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.SIGN_RESPONSE,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            cpic: '',\n            accept: false,\n            reason: '处理邀请出错: ' + error.message\n        })\n    }\n}\n\n// 处理签名参数\nasync function handleSignParams(message) {\n    try {\n        // 调用MPC签名服务\n        const signResponse = await mpcApi.sign({\n            parties: message.parties,\n            data: message.data,\n            filename: message.filename,\n            encryptedKey: message.encrypted_shard,\n            userName: store.state.user.username,\n            address: message.address,\n            signature: message.signature\n        })\n\n        if (signResponse.data.success) {\n            // 发送签名结果\n            sendWSMessage({\n                type: WS_MESSAGE_TYPES.SIGN_RESULT,\n                session_key: message.session_key,\n                part_index: message.part_index,\n                success: true,\n                signature: signResponse.data.signature,\n                message: '签名成功'\n            })\n\n            Message.success('签名成功')\n        } else {\n            throw new Error('MPC服务签名失败')\n        }\n    } catch (error) {\n        console.error('签名失败:', error)\n        // 发送失败结果\n        sendWSMessage({\n            type: WS_MESSAGE_TYPES.SIGN_RESULT,\n            session_key: message.session_key,\n            part_index: message.part_index,\n            success: false,\n            signature: '',\n            message: '签名失败: ' + error.message\n        })\n\n        Message.error('签名失败: ' + error.message)\n    }\n}\n\n// 处理签名完成消息\nfunction handleSignComplete(message) {\n    if (message.success) {\n        MessageBox.alert(\n            `签名成功! 签名结果: ${message.signature}`,\n            '签名完成',\n            { type: 'success' }\n        )\n    } else {\n        MessageBox.alert(\n            `签名失败: ${message.message}`,\n            '签名失败',\n            { type: 'error' }\n        )\n    }\n}\n\n// 处理错误消息\nfunction handleError(message) {\n    console.error('收到错误消息:', message)\n    Message.error(`错误: ${message.message}`)\n} ","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.isLoggedIn)?_c('ws-status-indicator'):_vm._e(),_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ws-status-indicator\",class:_vm.statusClass,attrs:{\"title\":_vm.statusText},on:{\"click\":_vm.toggleDisplayText}},[_c('i',{staticClass:\"el-icon-connection\"}),(_vm.displayText)?_c('span',[_vm._v(_vm._s(_vm.statusText))]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ws-status-indicator\" :class=\"statusClass\" :title=\"statusText\" @click=\"toggleDisplayText\">\n    <i class=\"el-icon-connection\"></i>\n    <span v-if=\"displayText\">{{ statusText }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'WsStatusIndicator',\n  data() {\n    return {\n      displayText: false,\n      checkInterval: null,\n      tokenWarning: false\n    }\n  },\n  computed: {\n    isConnected() {\n      return this.$store.state.wsConnected\n    },\n    isConnecting() {\n      return this.$store.state.wsConnecting\n    },\n    lastError() {\n      return this.$store.state.wsLastError\n    },\n    token() {\n      return this.$store.state.token\n    },\n    statusClass() {\n      if (this.tokenWarning) {\n        return 'warning'\n      }\n      if (this.isConnected) {\n        return 'connected'\n      } else if (this.isConnecting) {\n        return 'connecting'\n      } else {\n        return 'disconnected'\n      }\n    },\n    statusText() {\n      if (this.tokenWarning) {\n        return 'Token格式可能有问题'\n      }\n      if (this.isConnected) {\n        return '连接正常'\n      } else if (this.isConnecting) {\n        return '正在连接...'\n      } else {\n        return this.lastError ? `连接断开: ${this.lastError}` : '连接断开'\n      }\n    }\n  },\n  methods: {\n    toggleDisplayText() {\n      this.displayText = !this.displayText\n      if (!this.isConnected) {\n        this.checkAuthStatus()\n      }\n    },\n    checkConnectionStatus() {\n      this.$store.dispatch('checkWebSocketHealth')\n    },\n    checkAuthStatus() {\n      // 检查Token是否存在\n      const token = localStorage.getItem('token')\n      console.log('当前token状态:', {\n        token: token ? `${token.substring(0, 10)}...` : null,\n        storeToken: this.token ? `${this.token.substring(0, 10)}...` : null,\n        hasToken: !!token,\n        wsConnected: this.isConnected\n      })\n\n      // 检查token是否以Bearer开头，如果是需要修复(去掉前缀)\n      if (token && token.startsWith('Bearer ')) {\n        const fixedToken = token.substring(7)\n        localStorage.setItem('token', fixedToken)\n        this.$store.commit('setToken', fixedToken)\n        console.log('已修复token格式 (移除Bearer前缀):', fixedToken.substring(0, 10) + '...')\n        this.tokenWarning = true\n      } else {\n        this.tokenWarning = false\n      }\n    }\n  },\n  mounted() {\n    // 初始检查token\n    this.checkAuthStatus()\n\n    // 每60秒检查一次连接状态\n    this.checkInterval = setInterval(() => {\n      this.checkConnectionStatus()\n      this.checkAuthStatus()\n    }, 60000)\n  },\n  beforeDestroy() {\n    if (this.checkInterval) {\n      clearInterval(this.checkInterval)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ws-status-indicator {\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  z-index: 1000;\n  padding: 5px 10px;\n  border-radius: 15px;\n  font-size: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: all 0.3s ease;\n  opacity: 0.7;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.ws-status-indicator:hover {\n  opacity: 1;\n}\n\n.ws-status-indicator.connected {\n  background-color: #67C23A;\n  color: white;\n}\n\n.ws-status-indicator.connecting {\n  background-color: #E6A23C;\n  color: white;\n  animation: pulse 1.5s infinite;\n}\n\n.ws-status-indicator.disconnected {\n  background-color: #F56C6C;\n  color: white;\n}\n\n.ws-status-indicator.warning {\n  background-color: #F56C6C;\n  color: white;\n  animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n  0% {\n    opacity: 0.5;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0.5;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WsStatusIndicator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WsStatusIndicator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./WsStatusIndicator.vue?vue&type=template&id=b517988e&scoped=true\"\nimport script from \"./WsStatusIndicator.vue?vue&type=script&lang=js\"\nexport * from \"./WsStatusIndicator.vue?vue&type=script&lang=js\"\nimport style0 from \"./WsStatusIndicator.vue?vue&type=style&index=0&id=b517988e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b517988e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"app\">\n        <ws-status-indicator v-if=\"isLoggedIn\"></ws-status-indicator>\n        <router-view />\n    </div>\n</template>\n\n<script>\nimport WsStatusIndicator from './components/WsStatusIndicator.vue'\n\nexport default {\n    name: 'App',\n    components: {\n        WsStatusIndicator\n    },\n    computed: {\n        isLoggedIn() {\n            return this.$store.getters.isLoggedIn\n        }\n    }\n}\n</script>\n\n<style>\n#app {\n    font-family: 'Microsoft YaHei', Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: #2c3e50;\n    height: 100vh;\n    width: 100vw;\n}\n\nbody,\nhtml {\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.container {\n    width: 100%;\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 20px;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=30f5da90\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=30f5da90&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('el-card',{staticClass:\"login-card\"},[_c('div',{staticClass:\"card-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('h2',[_vm._v(\"多方门限签名系统\")])]),_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"label-width\":\"0px\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"用户名\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"密码\",\"show-password\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleLogin}},[_vm._v(\" 登录 \")])],1),_c('el-form-item',[_c('div',{staticClass:\"register-link\"},[_c('span',[_vm._v(\"没有账号?\")]),_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"立即注册\")])],1)])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"login-container\">\n        <el-card class=\"login-card\">\n            <div slot=\"header\" class=\"card-header\">\n                <h2>多方门限签名系统</h2>\n            </div>\n\n            <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" label-width=\"0px\">\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"loginForm.username\" prefix-icon=\"el-icon-user\" placeholder=\"用户名\">\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"password\">\n                    <el-input v-model=\"loginForm.password\" prefix-icon=\"el-icon-lock\" placeholder=\"密码\" show-password>\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" :loading=\"loading\" @click=\"handleLogin\" style=\"width: 100%\">\n                        登录\n                    </el-button>\n                </el-form-item>\n\n                <el-form-item>\n                    <div class=\"register-link\">\n                        <span>没有账号?</span>\n                        <router-link to=\"/register\">立即注册</router-link>\n                    </div>\n                </el-form-item>\n            </el-form>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { userApi } from '../services/api'\n\nexport default {\n    name: 'Login',\n    data() {\n        return {\n            loginForm: {\n                username: '',\n                password: ''\n            },\n            rules: {\n                username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\n                password: [{ required: true, message: '请输入密码', trigger: 'blur' }]\n            },\n            loading: false\n        }\n    },\n    methods: {\n        handleLogin() {\n            this.$refs.loginForm.validate(async valid => {\n                if (!valid) {\n                    return false\n                }\n\n                this.loading = true\n\n                try {\n                    const response = await userApi.login({\n                        username: this.loginForm.username,\n                        password: this.loginForm.password\n                    })\n\n                    // 验证响应数据\n                    if (!response.data || !response.data.token) {\n                        throw new Error('服务器响应异常：缺少认证令牌')\n                    }\n\n                    // 确保token格式正确\n                    const token = response.data.token.startsWith('Bearer ') \n                        ? response.data.token \n                        : `Bearer ${response.data.token}`\n                    \n                    // 保存格式化后的token和用户信息\n                    const userData = {\n                        token: token,\n                        user: response.data.user\n                    }\n\n                    // 保存用户信息和令牌\n                    this.$store.dispatch('login', userData)\n\n                    // 调试信息\n                    console.log('用户登录成功', userData.user.username, userData.user.role)\n\n                    // 连接WebSocket\n                    this.$store.dispatch('connectWebSocket')\n\n                    // 延迟一点时间以确保WebSocket连接建立\n                    setTimeout(() => {\n                        // 跳转到仪表板\n                        this.$router.push('/dashboard')\n\n                        this.$message.success('登录成功')\n                    }, 500)\n                } catch (error) {\n                    console.error('登录失败:', error)\n                    let errorMsg = '登录失败，请检查用户名和密码'\n                    \n                    if (error.response) {\n                        errorMsg = error.response.data?.error || error.response.data?.message || errorMsg\n                    } else if (error.message) {\n                        errorMsg = error.message\n                    }\n                    \n                    this.$message.error(errorMsg)\n                } finally {\n                    this.loading = false\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.login-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    background-color: #f5f7fa;\n}\n\n.login-card {\n    width: 400px;\n    border-radius: 8px;\n}\n\n.card-header {\n    text-align: center;\n}\n\n.card-header h2 {\n    margin: 0;\n    color: #409EFF;\n}\n\n.register-link {\n    text-align: center;\n    font-size: 14px;\n    color: #606266;\n}\n\n.register-link a {\n    color: #409EFF;\n    text-decoration: none;\n    margin-left: 5px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=0e07ba8c&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=0e07ba8c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e07ba8c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"register-container\"},[_c('el-card',{staticClass:\"register-card\"},[_c('div',{staticClass:\"card-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('h2',[_vm._v(\"用户注册\")])]),_c('el-form',{ref:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.rules,\"label-width\":\"0px\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"用户名\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"确认密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirmPassword\", $$v)},expression:\"registerForm.confirmPassword\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-message\",\"placeholder\":\"邮箱\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleRegister}},[_vm._v(\" 注册 \")])],1),_c('el-form-item',[_c('div',{staticClass:\"login-link\"},[_c('span',[_vm._v(\"已有账号?\")]),_c('router-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"立即登录\")])],1)])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"register-container\">\n        <el-card class=\"register-card\">\n            <div slot=\"header\" class=\"card-header\">\n                <h2>用户注册</h2>\n            </div>\n\n            <el-form :model=\"registerForm\" :rules=\"rules\" ref=\"registerForm\" label-width=\"0px\">\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"registerForm.username\" prefix-icon=\"el-icon-user\" placeholder=\"用户名\">\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"password\">\n                    <el-input v-model=\"registerForm.password\" prefix-icon=\"el-icon-lock\" placeholder=\"密码\" show-password>\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"confirmPassword\">\n                    <el-input v-model=\"registerForm.confirmPassword\" prefix-icon=\"el-icon-lock\" placeholder=\"确认密码\"\n                        show-password>\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"email\">\n                    <el-input v-model=\"registerForm.email\" prefix-icon=\"el-icon-message\" placeholder=\"邮箱\">\n                    </el-input>\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" :loading=\"loading\" @click=\"handleRegister\" style=\"width: 100%\">\n                        注册\n                    </el-button>\n                </el-form-item>\n\n                <el-form-item>\n                    <div class=\"login-link\">\n                        <span>已有账号?</span>\n                        <router-link to=\"/login\">立即登录</router-link>\n                    </div>\n                </el-form-item>\n            </el-form>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { userApi } from '../services/api'\n\nexport default {\n    name: 'Register',\n    data() {\n        // 密码一致性校验\n        const validateConfirmPassword = (rule, value, callback) => {\n            if (value !== this.registerForm.password) {\n                callback(new Error('两次输入的密码不一致'))\n            } else {\n                callback()\n            }\n        }\n\n        return {\n            registerForm: {\n                username: '',\n                password: '',\n                confirmPassword: '',\n                email: ''\n            },\n            rules: {\n                username: [\n                    { required: true, message: '请输入用户名', trigger: 'blur' },\n                    { min: 3, max: 20, message: '用户名长度应为3-20个字符', trigger: 'blur' }\n                ],\n                password: [\n                    { required: true, message: '请输入密码', trigger: 'blur' },\n                    { min: 6, message: '密码长度至少为6个字符', trigger: 'blur' }\n                ],\n                confirmPassword: [\n                    { required: true, message: '请确认密码', trigger: 'blur' },\n                    { validator: validateConfirmPassword, trigger: 'blur' }\n                ],\n                email: [\n                    { required: true, message: '请输入邮箱', trigger: 'blur' },\n                    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n                ]\n            },\n            loading: false\n        }\n    },\n    methods: {\n        handleRegister() {\n            this.$refs.registerForm.validate(async valid => {\n                if (!valid) {\n                    return false\n                }\n\n                this.loading = true\n\n                try {\n                    const response = await userApi.register({\n                        username: this.registerForm.username,\n                        password: this.registerForm.password,\n                        email: this.registerForm.email\n                    })\n\n                    // 注册成功\n                    this.$message.success('注册成功，请登录')\n\n                    // 跳转到登录页面\n                    this.$router.push('/login')\n                } catch (error) {\n                    console.error('注册失败:', error)\n                    this.$message.error(error.response?.data?.error || '注册失败，请稍后重试')\n                } finally {\n                    this.loading = false\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.register-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    background-color: #f5f7fa;\n}\n\n.register-card {\n    width: 400px;\n    border-radius: 8px;\n}\n\n.card-header {\n    text-align: center;\n}\n\n.card-header h2 {\n    margin: 0;\n    color: #409EFF;\n}\n\n.login-link {\n    text-align: center;\n    font-size: 14px;\n    color: #606266;\n}\n\n.login-link a {\n    color: #409EFF;\n    text-decoration: none;\n    margin-left: 5px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=1acadbea&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=1acadbea&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1acadbea\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dashboard-container\"},[_c('el-container',[_c('el-header',{staticClass:\"header\"},[_c('div',{staticClass:\"logo\"},[_vm._v(\"MPC密钥管理系统\")]),_c('div',{staticClass:\"user-info\"},[_c('span',[_vm._v(\"欢迎, \"+_vm._s(_vm.user.username)+\" (\"+_vm._s(_vm.roleText)+\")\")]),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.handleLogout}},[_vm._v(\"退出登录\")])],1)]),_c('el-container',[_c('el-aside',{attrs:{\"width\":\"250px\"}},[_c('el-menu',{staticClass:\"menu\",attrs:{\"default-active\":_vm.activeMenu,\"router\":\"\",\"background-color\":\"#304156\",\"text-color\":\"#bfcbd9\",\"active-text-color\":\"#409EFF\"}},[(_vm.isAdmin)?_c('el-menu-item',{attrs:{\"index\":\"/users\"}},[_c('i',{staticClass:\"el-icon-user\"}),_c('span',[_vm._v(\"用户管理\")])]):_vm._e(),(_vm.isAdmin || _vm.isCoordinator)?_c('el-menu-item',{attrs:{\"index\":\"/keygen\"}},[_c('i',{staticClass:\"el-icon-key\"}),_c('span',[_vm._v(\"密钥生成\")])]):_vm._e(),(_vm.isAdmin || _vm.isCoordinator)?_c('el-menu-item',{attrs:{\"index\":\"/sign\"}},[_c('i',{staticClass:\"el-icon-edit\"}),_c('span',[_vm._v(\"交易签名\")])]):_vm._e(),_c('el-menu-item',{attrs:{\"index\":\"/notifications\"}},[_c('i',{staticClass:\"el-icon-bell\"}),_c('span',[_vm._v(\"通知消息\")]),(_vm.notifications.length > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.notifications.length}}):_vm._e()],1)],1)],1),_c('el-main',[_c('router-view'),(_vm.$route.path === '/dashboard')?_c('div',{staticClass:\"welcome-container\"},[_c('div',{staticClass:\"welcome-message\"},[_c('i',{staticClass:\"el-icon-s-home welcome-icon\"}),_c('h2',[_vm._v(\"欢迎使用多方门限签名系统\")]),_c('p',[_vm._v(\"请根据您的角色和需求，使用左侧菜单选择相应功能\")]),(_vm.isAdmin)?_c('div',{staticClass:\"feature-box\"},[_c('h3',[_vm._v(\"管理员功能\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/users')}}},[_vm._v(\"用户管理\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/keygen')}}},[_vm._v(\"密钥生成\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/sign')}}},[_vm._v(\"交易签名\")])],1):(_vm.isCoordinator)?_c('div',{staticClass:\"feature-box\"},[_c('h3',[_vm._v(\"协调者功能\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/keygen')}}},[_vm._v(\"密钥生成\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/sign')}}},[_vm._v(\"交易签名\")])],1):(_vm.isParticipant)?_c('div',{staticClass:\"feature-box\"},[_c('h3',[_vm._v(\"参与者功能\")]),_c('p',[_vm._v(\"作为参与者，您将收到密钥生成和签名请求的邀请\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push('/notifications')}}},[_vm._v(\"查看通知\")])],1):_vm._e()])]):_vm._e()],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"dashboard-container\">\n        <el-container>\n            <el-header class=\"header\">\n                <div class=\"logo\">MPC密钥管理系统</div>\n                <div class=\"user-info\">\n                    <span>欢迎, {{ user.username }} ({{ roleText }})</span>\n                    <el-button type=\"text\" @click=\"handleLogout\">退出登录</el-button>\n                </div>\n            </el-header>\n\n            <el-container>\n                <el-aside width=\"250px\">\n                    <el-menu :default-active=\"activeMenu\" router class=\"menu\" background-color=\"#304156\"\n                        text-color=\"#bfcbd9\" active-text-color=\"#409EFF\">\n                        <el-menu-item v-if=\"isAdmin\" index=\"/users\">\n                            <i class=\"el-icon-user\"></i>\n                            <span>用户管理</span>\n                        </el-menu-item>\n                        <el-menu-item v-if=\"isAdmin || isCoordinator\" index=\"/keygen\">\n                            <i class=\"el-icon-key\"></i>\n                            <span>密钥生成</span>\n                        </el-menu-item>\n                        <el-menu-item v-if=\"isAdmin || isCoordinator\" index=\"/sign\">\n                            <i class=\"el-icon-edit\"></i>\n                            <span>交易签名</span>\n                        </el-menu-item>\n                        <el-menu-item index=\"/notifications\">\n                            <i class=\"el-icon-bell\"></i>\n                            <span>通知消息</span>\n                            <el-badge v-if=\"notifications.length > 0\" :value=\"notifications.length\" class=\"item\">\n                            </el-badge>\n                        </el-menu-item>\n                    </el-menu>\n                </el-aside>\n\n                <el-main>\n                    <router-view></router-view>\n\n                    <div v-if=\"$route.path === '/dashboard'\" class=\"welcome-container\">\n                        <div class=\"welcome-message\">\n                            <i class=\"el-icon-s-home welcome-icon\"></i>\n                            <h2>欢迎使用多方门限签名系统</h2>\n                            <p>请根据您的角色和需求，使用左侧菜单选择相应功能</p>\n\n                            <div v-if=\"isAdmin\" class=\"feature-box\">\n                                <h3>管理员功能</h3>\n                                <el-button type=\"primary\" @click=\"$router.push('/users')\">用户管理</el-button>\n                                <el-button type=\"primary\" @click=\"$router.push('/keygen')\">密钥生成</el-button>\n                                <el-button type=\"primary\" @click=\"$router.push('/sign')\">交易签名</el-button>\n                            </div>\n\n                            <div v-else-if=\"isCoordinator\" class=\"feature-box\">\n                                <h3>协调者功能</h3>\n                                <el-button type=\"primary\" @click=\"$router.push('/keygen')\">密钥生成</el-button>\n                                <el-button type=\"primary\" @click=\"$router.push('/sign')\">交易签名</el-button>\n                            </div>\n\n                            <div v-else-if=\"isParticipant\" class=\"feature-box\">\n                                <h3>参与者功能</h3>\n                                <p>作为参与者，您将收到密钥生成和签名请求的邀请</p>\n                                <el-button type=\"primary\" @click=\"$router.push('/notifications')\">查看通知</el-button>\n                            </div>\n                        </div>\n                    </div>\n                </el-main>\n            </el-container>\n        </el-container>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { initWebSocketService, resetWebSocketService } from '../services/ws'\n\nexport default {\n    name: 'Dashboard',\n    data() {\n        return {\n            activeMenu: this.$route.path,\n            wsCheckInterval: null,\n            wsErrorCount: 0,\n            lastWsReset: 0,\n            healthCheckInterval: null\n        }\n    },\n    computed: {\n        ...mapGetters([\n            'currentUser',\n            'isAdmin',\n            'isCoordinator',\n            'isParticipant',\n            'notifications',\n            'wsConnected'\n        ]),\n        user() {\n            return this.currentUser || {}\n        },\n        roleText() {\n            if (this.isAdmin) return '管理员'\n            if (this.isCoordinator) return '协调者'\n            if (this.isParticipant) return '参与者'\n            return '访客'\n        },\n        // 计算未响应的邀请通知数量\n        pendingInvitations() {\n            return this.notifications.filter(n =>\n                (n.type === 'keygen_invite' || n.type === 'sign_invite') &&\n                !n.responded\n            )\n        },\n        // 是否有需要处理的通知\n        hasUnhandledNotifications() {\n            return this.pendingInvitations.length > 0\n        }\n    },\n    created() {\n        // 初始化WebSocket\n        this.ensureWebSocketConnection()\n\n        // 设置定时检查WebSocket连接\n        this.wsCheckInterval = setInterval(() => {\n            this.checkWsConnection()\n        }, 10000) // 每10秒检查一次\n\n        // 检查是否有未处理的通知，如果有则自动跳转到通知页面\n        this.checkPendingNotifications()\n    },\n    mounted() {\n        // 如果是参与者，每分钟检查一次未处理的通知\n        if (this.isParticipant) {\n            this.notificationCheckInterval = setInterval(() => {\n                this.checkPendingNotifications()\n            }, 60000) // 每分钟检查一次\n        }\n\n        // 添加页面可见性监听\n        document.addEventListener('visibilitychange', this.handleVisibilityChange)\n        \n        // 设置定期的连接健康检查\n        this.healthCheckInterval = setInterval(() => {\n            this.checkWsConnection()\n        }, 60000) // 每分钟检查一次连接状态\n    },\n    beforeDestroy() {\n        // 清除定时器\n        if (this.wsCheckInterval) {\n            clearInterval(this.wsCheckInterval)\n        }\n        if (this.notificationCheckInterval) {\n            clearInterval(this.notificationCheckInterval)\n        }\n\n        // 移除页面可见性监听\n        document.removeEventListener('visibilitychange', this.handleVisibilityChange)\n        \n        // 清除健康检查定时器\n        if (this.healthCheckInterval) {\n            clearInterval(this.healthCheckInterval)\n        }\n    },\n    methods: {\n        // 处理页面可见性变化\n        handleVisibilityChange() {\n            if (!document.hidden) {\n                // 页面变为可见时，检查WebSocket连接\n                console.log('页面变为可见，检查WebSocket连接')\n                this.checkWsConnection()\n            }\n        },\n\n        // 检查WebSocket连接状态\n        checkWsConnection() {\n            // 使用store的健康检查方法\n            this.$store.dispatch('checkWebSocketHealth')\n        },\n\n        // 重置WebSocket连接\n        resetWsConnection() {\n            // 使用动态导入，确保使用最新版本的服务\n            import('../services/ws').then(({ resetWebSocketService }) => {\n                resetWebSocketService()\n                this.$store.dispatch('resetWebSocketConnection')\n            })\n        },\n\n        // 确保WebSocket连接\n        ensureWebSocketConnection() {\n            this.$store.dispatch('connectWebSocket')\n\n            // 初始化WebSocket消息处理\n            setTimeout(() => {\n                initWebSocketService()\n            }, 1000)  // 等待1秒确保连接已建立\n        },\n\n        // 检查未处理的通知\n        checkPendingNotifications() {\n            if (this.hasUnhandledNotifications && this.$route.path !== '/notifications') {\n                this.$notify({\n                    title: '未处理的邀请',\n                    message: `您有 ${this.pendingInvitations.length} 个未处理的邀请，即将跳转到通知页面`,\n                    type: 'warning',\n                    duration: 5000\n                })\n\n                // 3秒后跳转到通知页面\n                setTimeout(() => {\n                    this.$router.push('/notifications')\n                }, 3000)\n            }\n        },\n\n        // 退出登录\n        handleLogout() {\n            this.$store.dispatch('logout')\n            this.$router.push('/login')\n        }\n    },\n    watch: {\n        // 路径变化时更新活动菜单\n        '$route.path'(newPath) {\n            this.activeMenu = newPath\n        },\n\n        // WebSocket连接状态变化\n        wsConnected(connected) {\n            if (connected) {\n                console.log('WebSocket已连接')\n                this.wsErrorCount = 0  // 重置错误计数\n            } else {\n                console.warn('WebSocket连接已断开')\n            }\n        },\n\n        // 通知数量变化\n        notifications(newNotifications) {\n            // 当新增通知时检查是否需要跳转\n            if (this.hasUnhandledNotifications && this.$route.path !== '/notifications') {\n                this.checkPendingNotifications()\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.dashboard-container {\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n}\n\n.header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    background-color: #304156;\n    color: white;\n    padding: 0 20px;\n    height: 60px;\n}\n\n.logo {\n    font-size: 20px;\n    font-weight: bold;\n}\n\n.user-info {\n    display: flex;\n    align-items: center;\n}\n\n.user-info span {\n    margin-right: 15px;\n}\n\n.menu {\n    height: calc(100vh - 60px);\n}\n\n.el-menu-item {\n    font-size: 14px;\n}\n\n.el-aside {\n    background-color: #304156;\n}\n\n.el-main {\n    padding: 20px;\n    background-color: #f0f2f5;\n}\n\n.welcome-container {\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.welcome-message {\n    text-align: center;\n    padding: 40px;\n    background-color: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    max-width: 600px;\n}\n\n.welcome-icon {\n    font-size: 64px;\n    color: #409EFF;\n    margin-bottom: 20px;\n}\n\n.feature-box {\n    margin-top: 30px;\n    padding: 20px;\n    background-color: #f8f9fa;\n    border-radius: 4px;\n}\n\n.feature-box h3 {\n    margin-bottom: 15px;\n    color: #606266;\n}\n\n.feature-box .el-button {\n    margin: 10px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=5e4ec115&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=5e4ec115&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e4ec115\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"users-container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"用户管理\")])]),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"width\":\"220\"}}),_c('el-table-column',{attrs:{\"prop\":\"role\",\"label\":\"当前角色\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":\"选择角色\",\"size\":\"small\"},model:{value:(scope.row.newRole),callback:function ($$v) {_vm.$set(scope.row, \"newRole\", $$v)},expression:\"scope.row.newRole\"}},[_c('el-option',{attrs:{\"label\":\"管理员\",\"value\":\"admin\"}}),_c('el-option',{attrs:{\"label\":\"协调者\",\"value\":\"coordinator\"}}),_c('el-option',{attrs:{\"label\":\"参与者\",\"value\":\"participant\"}}),_c('el-option',{attrs:{\"label\":\"访客\",\"value\":\"guest\"}})],1),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":scope.row.role === scope.row.newRole},on:{\"click\":function($event){return _vm.updateUserRole(scope.row)}}},[_vm._v(\" 更新角色 \")])]}}])})],1),(_vm.userList.length === 0 && !_vm.loading)?_c('div',{staticClass:\"empty-state\"},[_c('p',[_vm._v(\"暂无用户数据\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.fetchUserList}},[_vm._v(\"刷新\")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"users-container\">\n        <el-card>\n            <div slot=\"header\">\n                <span>用户管理</span>\n            </div>\n\n            <el-table :data=\"userList\" v-loading=\"loading\" style=\"width: 100%\">\n                <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"></el-table-column>\n                <el-table-column prop=\"email\" label=\"邮箱\" width=\"220\"></el-table-column>\n                <el-table-column prop=\"role\" label=\"当前角色\" width=\"120\"></el-table-column>\n                <el-table-column label=\"操作\">\n                    <template slot-scope=\"scope\">\n                        <el-select v-model=\"scope.row.newRole\" placeholder=\"选择角色\" size=\"small\">\n                            <el-option label=\"管理员\" value=\"admin\"></el-option>\n                            <el-option label=\"协调者\" value=\"coordinator\"></el-option>\n                            <el-option label=\"参与者\" value=\"participant\"></el-option>\n                            <el-option label=\"访客\" value=\"guest\"></el-option>\n                        </el-select>\n                        <el-button type=\"primary\" size=\"small\" :disabled=\"scope.row.role === scope.row.newRole\"\n                            @click=\"updateUserRole(scope.row)\" style=\"margin-left: 10px\">\n                            更新角色\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n\n            <div v-if=\"userList.length === 0 && !loading\" class=\"empty-state\">\n                <p>暂无用户数据</p>\n                <el-button type=\"primary\" size=\"small\" @click=\"fetchUserList\">刷新</el-button>\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { userApi } from '../services/api'\n\nexport default {\n    name: 'Users',\n    data() {\n        return {\n            userList: [],\n            loading: false\n        }\n    },\n    created() {\n        this.fetchUserList()\n    },\n    methods: {\n        async fetchUserList() {\n            this.loading = true\n            try {\n                const response = await userApi.getUsers()\n                // 检查响应格式，适配后端API的返回格式\n                const users = response.data.users || response.data.data || []\n                this.userList = users.map(user => ({\n                    ...user,\n                    newRole: user.role\n                }))\n\n                if (this.userList.length === 0) {\n                    this.$message.warning('未找到用户数据')\n                }\n            } catch (error) {\n                console.error('获取用户列表失败:', error)\n                this.$message.error('获取用户列表失败: ' + (error.response?.data?.error || error.message))\n            } finally {\n                this.loading = false\n            }\n        },\n\n        async updateUserRole(user) {\n            try {\n                await userApi.updateUserRole(user.username, user.newRole)\n                this.$message.success(`用户 ${user.username} 角色已更新为 ${user.newRole}`)\n                // 更新当前角色\n                user.role = user.newRole\n            } catch (error) {\n                console.error('更新用户角色失败:', error)\n                this.$message.error('更新用户角色失败')\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.users-container {\n    padding: 20px;\n}\n\n.empty-state {\n    text-align: center;\n    padding: 40px 0;\n    color: #606266;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=beb5ce7e&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=beb5ce7e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"beb5ce7e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"keygen-container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"密钥生成\")])]),_c('el-form',{ref:\"keygenForm\",attrs:{\"model\":_vm.keygenForm,\"rules\":_vm.keygenRules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"门限值\",\"prop\":\"threshold\"}},[_c('el-input-number',{attrs:{\"min\":2,\"max\":_vm.keygenForm.totalParts},on:{\"change\":_vm.handleThresholdChange},model:{value:(_vm.keygenForm.threshold),callback:function ($$v) {_vm.$set(_vm.keygenForm, \"threshold\", $$v)},expression:\"keygenForm.threshold\"}})],1),_c('el-form-item',{attrs:{\"label\":\"总分片数\",\"prop\":\"totalParts\"}},[_c('el-input-number',{attrs:{\"min\":_vm.keygenForm.threshold,\"max\":10},model:{value:(_vm.keygenForm.totalParts),callback:function ($$v) {_vm.$set(_vm.keygenForm, \"totalParts\", $$v)},expression:\"keygenForm.totalParts\"}})],1),_c('el-form-item',{attrs:{\"label\":\"参与者\",\"prop\":\"participants\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择参与者\"},model:{value:(_vm.keygenForm.participants),callback:function ($$v) {_vm.$set(_vm.keygenForm, \"participants\", $$v)},expression:\"keygenForm.participants\"}},_vm._l((_vm.availableParticipants),function(p){return _c('el-option',{key:p,attrs:{\"label\":p,\"value\":p}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.keygenLoading},on:{\"click\":_vm.handleKeyGenSubmit}},[_vm._v(\" 发起密钥生成 \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"keygen-container\">\n        <el-card>\n            <div slot=\"header\">\n                <span>密钥生成</span>\n            </div>\n\n            <el-form :model=\"keygenForm\" :rules=\"keygenRules\" ref=\"keygenForm\" label-width=\"120px\">\n                <el-form-item label=\"门限值\" prop=\"threshold\">\n                    <el-input-number v-model=\"keygenForm.threshold\" :min=\"2\" :max=\"keygenForm.totalParts\"\n                        @change=\"handleThresholdChange\">\n                    </el-input-number>\n                </el-form-item>\n\n                <el-form-item label=\"总分片数\" prop=\"totalParts\">\n                    <el-input-number v-model=\"keygenForm.totalParts\" :min=\"keygenForm.threshold\" :max=\"10\">\n                    </el-input-number>\n                </el-form-item>\n\n                <el-form-item label=\"参与者\" prop=\"participants\">\n                    <el-select v-model=\"keygenForm.participants\" multiple placeholder=\"请选择参与者\" style=\"width: 100%\">\n                        <el-option v-for=\"p in availableParticipants\" :key=\"p\" :label=\"p\" :value=\"p\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" :loading=\"keygenLoading\" @click=\"handleKeyGenSubmit\">\n                        发起密钥生成\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { keygenApi } from '../services/api'\nimport { sendWSMessage, WS_MESSAGE_TYPES } from '../services/ws'\n\nexport default {\n    name: 'KeyGen',\n    data() {\n        return {\n            keygenForm: {\n                threshold: 2,\n                totalParts: 3,\n                participants: []\n            },\n            keygenRules: {\n                threshold: [\n                    { required: true, message: '请输入门限值', trigger: 'blur' }\n                ],\n                totalParts: [\n                    { required: true, message: '请输入总分片数', trigger: 'blur' }\n                ],\n                participants: [\n                    { required: true, message: '请选择参与者', trigger: 'change' },\n                    { validator: this.validateParticipants, trigger: 'change' }\n                ]\n            },\n            availableParticipants: [],\n            keygenLoading: false\n        }\n    },\n    created() {\n        this.fetchAvailableParticipants()\n    },\n    methods: {\n        // 验证参与者选择是否满足门限要求\n        validateParticipants(rule, value, callback) {\n            if (!value || value.length < this.keygenForm.threshold) {\n                callback(new Error(`至少需要选择${this.keygenForm.threshold}个参与者`))\n            } else {\n                callback()\n            }\n        },\n\n        // 门限值变更处理\n        handleThresholdChange(val) {\n            if (val > this.keygenForm.totalParts) {\n                this.keygenForm.totalParts = val\n            }\n        },\n\n        // 获取可用参与者列表\n        async fetchAvailableParticipants() {\n            try {\n                const response = await keygenApi.getAvailableUsers()\n                this.availableParticipants = response.data.data.filter(user =>\n                    user.role === 'participant'\n                ).map(user => user.username)\n\n                // 默认选择前n个参与者\n                if (this.availableParticipants.length >= this.keygenForm.threshold) {\n                    this.keygenForm.participants = this.availableParticipants.slice(0, this.keygenForm.totalParts)\n                }\n            } catch (error) {\n                console.error('获取参与者列表失败:', error)\n\n                // 检查错误类型\n                let errorMsg = '获取参与者列表失败'\n                if (error.response && error.response.status === 401) {\n                    errorMsg = '认证已过期，请重新登录'\n\n                    // 延迟1秒再登出，让用户有时间看到错误信息\n                    setTimeout(() => {\n                        this.$store.dispatch('logout')\n                        this.$router.push('/login')\n                    }, 1000)\n                } else if (error.response) {\n                    errorMsg = error.response.data?.error || error.response.data?.message || errorMsg\n                }\n\n                this.$message.error(errorMsg)\n            }\n        },\n\n        // 发起密钥生成请求\n        handleKeyGenSubmit() {\n            this.$refs.keygenForm.validate(async valid => {\n                if (!valid) {\n                    return false\n                }\n\n                this.keygenLoading = true\n\n                try {\n                    // 创建密钥生成会话\n                    const response = await keygenApi.createSession(this.$store.getters.currentUser.username)\n                    const sessionKey = response.data.session_key\n\n                    // 存储当前会话\n                    this.$store.commit('setCurrentSession', sessionKey)\n\n                    // 发送WebSocket消息\n                    sendWSMessage({\n                        type: WS_MESSAGE_TYPES.KEYGEN_REQUEST,\n                        session_key: sessionKey,\n                        threshold: this.keygenForm.threshold,\n                        total_parts: this.keygenForm.totalParts,\n                        participants: this.keygenForm.participants\n                    })\n\n                    this.$message.success('密钥生成请求已发送')\n                    // 自动跳转到通知页面\n                    this.$router.push('/notifications')\n                } catch (error) {\n                    console.error('发起密钥生成请求失败:', error)\n                    this.$message.error('发起密钥生成请求失败')\n                } finally {\n                    this.keygenLoading = false\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.keygen-container {\n    padding: 20px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeyGen.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeyGen.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./KeyGen.vue?vue&type=template&id=33adc480&scoped=true\"\nimport script from \"./KeyGen.vue?vue&type=script&lang=js\"\nexport * from \"./KeyGen.vue?vue&type=script&lang=js\"\nimport style0 from \"./KeyGen.vue?vue&type=style&index=0&id=33adc480&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33adc480\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"sign-container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"交易签名\")])]),_c('el-form',{ref:\"signForm\",attrs:{\"model\":_vm.signForm,\"rules\":_vm.signRules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"账户地址\",\"prop\":\"address\"}},[_c('el-input',{model:{value:(_vm.signForm.address),callback:function ($$v) {_vm.$set(_vm.signForm, \"address\", $$v)},expression:\"signForm.address\"}}),_c('el-button',{staticStyle:{\"margin-top\":\"5px\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.fetchSignAvailableParticipants}},[_vm._v(\" 获取可用参与者 \")])],1),_c('el-form-item',{attrs:{\"label\":\"待签名数据\",\"prop\":\"data\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2},model:{value:(_vm.signForm.data),callback:function ($$v) {_vm.$set(_vm.signForm, \"data\", $$v)},expression:\"signForm.data\"}})],1),_c('el-form-item',{attrs:{\"label\":\"门限值\",\"prop\":\"threshold\"}},[_c('el-input-number',{attrs:{\"min\":2,\"max\":_vm.signForm.totalParts},on:{\"change\":_vm.handleSignThresholdChange},model:{value:(_vm.signForm.threshold),callback:function ($$v) {_vm.$set(_vm.signForm, \"threshold\", $$v)},expression:\"signForm.threshold\"}})],1),_c('el-form-item',{attrs:{\"label\":\"总分片数\",\"prop\":\"totalParts\"}},[_c('el-input-number',{attrs:{\"min\":_vm.signForm.threshold,\"max\":10},model:{value:(_vm.signForm.totalParts),callback:function ($$v) {_vm.$set(_vm.signForm, \"totalParts\", $$v)},expression:\"signForm.totalParts\"}})],1),_c('el-form-item',{attrs:{\"label\":\"参与者\",\"prop\":\"participants\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择参与者\"},model:{value:(_vm.signForm.participants),callback:function ($$v) {_vm.$set(_vm.signForm, \"participants\", $$v)},expression:\"signForm.participants\"}},_vm._l((_vm.signAvailableParticipants),function(p){return _c('el-option',{key:p,attrs:{\"label\":p,\"value\":p}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.signLoading},on:{\"click\":_vm.handleSignSubmit}},[_vm._v(\" 发起签名请求 \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"sign-container\">\n        <el-card>\n            <div slot=\"header\">\n                <span>交易签名</span>\n            </div>\n\n            <el-form :model=\"signForm\" :rules=\"signRules\" ref=\"signForm\" label-width=\"120px\">\n                <el-form-item label=\"账户地址\" prop=\"address\">\n                    <el-input v-model=\"signForm.address\"></el-input>\n                    <el-button type=\"text\" @click=\"fetchSignAvailableParticipants\" style=\"margin-top: 5px\">\n                        获取可用参与者\n                    </el-button>\n                </el-form-item>\n\n                <el-form-item label=\"待签名数据\" prop=\"data\">\n                    <el-input v-model=\"signForm.data\" type=\"textarea\" :rows=\"2\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"门限值\" prop=\"threshold\">\n                    <el-input-number v-model=\"signForm.threshold\" :min=\"2\" :max=\"signForm.totalParts\"\n                        @change=\"handleSignThresholdChange\">\n                    </el-input-number>\n                </el-form-item>\n\n                <el-form-item label=\"总分片数\" prop=\"totalParts\">\n                    <el-input-number v-model=\"signForm.totalParts\" :min=\"signForm.threshold\" :max=\"10\">\n                    </el-input-number>\n                </el-form-item>\n\n                <el-form-item label=\"参与者\" prop=\"participants\">\n                    <el-select v-model=\"signForm.participants\" multiple placeholder=\"请选择参与者\" style=\"width: 100%\">\n                        <el-option v-for=\"p in signAvailableParticipants\" :key=\"p\" :label=\"p\" :value=\"p\">\n                        </el-option>\n                    </el-select>\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" :loading=\"signLoading\" @click=\"handleSignSubmit\">\n                        发起签名请求\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { signApi } from '../services/api'\nimport { sendWSMessage, WS_MESSAGE_TYPES } from '../services/ws'\n\nexport default {\n    name: 'Sign',\n    data() {\n        return {\n            signForm: {\n                address: '',\n                data: '0x1234abcd5678efgh9012ijkl3456mnop7890qrst', // 测试数据\n                threshold: 2,\n                totalParts: 3,\n                participants: []\n            },\n            signRules: {\n                address: [\n                    { required: true, message: '请输入账户地址', trigger: 'blur' }\n                ],\n                data: [\n                    { required: true, message: '请输入待签名数据', trigger: 'blur' }\n                ],\n                threshold: [\n                    { required: true, message: '请输入门限值', trigger: 'blur' }\n                ],\n                totalParts: [\n                    { required: true, message: '请输入总分片数', trigger: 'blur' }\n                ],\n                participants: [\n                    { required: true, message: '请选择参与者', trigger: 'change' },\n                    { validator: this.validateSignParticipants, trigger: 'change' }\n                ]\n            },\n            signAvailableParticipants: [],\n            signLoading: false\n        }\n    },\n    methods: {\n        // 验证签名参与者选择是否满足门限要求\n        validateSignParticipants(rule, value, callback) {\n            if (!value || value.length < this.signForm.threshold) {\n                callback(new Error(`至少需要选择${this.signForm.threshold}个参与者`))\n            } else {\n                callback()\n            }\n        },\n\n        // 签名门限值变更处理\n        handleSignThresholdChange(val) {\n            if (val > this.signForm.totalParts) {\n                this.signForm.totalParts = val\n            }\n        },\n\n        // 获取签名可用参与者\n        async fetchSignAvailableParticipants() {\n            if (!this.signForm.address) {\n                this.$message.warning('请先输入账户地址')\n                return\n            }\n\n            try {\n                const response = await signApi.getAvailableUsers(this.signForm.address)\n                this.signAvailableParticipants = response.data.data.map(user => user.username)\n\n                // 默认选择前n个参与者\n                if (this.signAvailableParticipants.length >= this.signForm.threshold) {\n                    this.signForm.participants = this.signAvailableParticipants.slice(0, this.signForm.threshold)\n                }\n\n                this.$message.success('已获取可用参与者')\n            } catch (error) {\n                console.error('获取签名参与者列表失败:', error)\n                this.$message.error('获取签名参与者列表失败')\n            }\n        },\n\n        // 发起签名请求\n        handleSignSubmit() {\n            this.$refs.signForm.validate(async valid => {\n                if (!valid) {\n                    return false\n                }\n\n                this.signLoading = true\n\n                try {\n                    // 创建签名会话\n                    const response = await signApi.createSession(this.$store.getters.currentUser.username)\n                    const sessionKey = response.data.session_key\n\n                    // 存储当前会话\n                    this.$store.commit('setCurrentSession', sessionKey)\n\n                    // 发送WebSocket消息\n                    sendWSMessage({\n                        type: WS_MESSAGE_TYPES.SIGN_REQUEST,\n                        session_key: sessionKey,\n                        threshold: this.signForm.threshold,\n                        total_parts: this.signForm.totalParts,\n                        data: this.signForm.data,\n                        address: this.signForm.address,\n                        participants: this.signForm.participants\n                    })\n\n                    this.$message.success('签名请求已发送')\n                    // 自动跳转到通知页面\n                    this.$router.push('/notifications')\n                } catch (error) {\n                    console.error('发起签名请求失败:', error)\n                    this.$message.error('发起签名请求失败')\n                } finally {\n                    this.signLoading = false\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.sign-container {\n    padding: 20px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sign.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sign.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Sign.vue?vue&type=template&id=39df3038&scoped=true\"\nimport script from \"./Sign.vue?vue&type=script&lang=js\"\nexport * from \"./Sign.vue?vue&type=script&lang=js\"\nimport style0 from \"./Sign.vue?vue&type=style&index=0&id=39df3038&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39df3038\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"notifications-container\"},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"通知消息\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.clearNotifications}},[_vm._v(\" 清空通知 \")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.notifications}},[_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"消息类型\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getTagType(scope.row.type)}},[_vm._v(_vm._s(_vm.formatMsgType(scope.row.type)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"timestamp\",\"label\":\"时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(new Date(scope.row.timestamp).toLocaleString())+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.type === 'keygen_invite')?_c('div',[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleKeygenInviteAccept(scope.row)}}},[_vm._v(\" 接受 \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleKeygenInviteReject(scope.row)}}},[_vm._v(\" 拒绝 \")])],1):(scope.row.type === 'sign_invite')?_c('div',[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleSignInviteAccept(scope.row)}}},[_vm._v(\" 接受 \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleSignInviteReject(scope.row)}}},[_vm._v(\" 拒绝 \")])],1):_vm._e(),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.showMessageDetail(scope.row)}}},[_vm._v(\" 查看详情 \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.responded)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"已响应\")]):(_vm.isInviteMessage(scope.row.type))?_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"待响应\")]):_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(\"-\")])]}}])})],1),(_vm.notifications.length === 0)?_c('div',{staticClass:\"empty-state\"},[_vm._v(\" 暂无通知消息 \")]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"notifications-container\">\n        <el-card>\n            <div slot=\"header\" class=\"clearfix\">\n                <span>通知消息</span>\n                <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"clearNotifications\">\n                    清空通知\n                </el-button>\n            </div>\n\n            <el-table :data=\"notifications\" style=\"width: 100%\">\n                <el-table-column prop=\"type\" label=\"消息类型\" width=\"180\">\n                    <template slot-scope=\"scope\">\n                        <el-tag :type=\"getTagType(scope.row.type)\">{{ formatMsgType(scope.row.type) }}</el-tag>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"timestamp\" label=\"时间\" width=\"180\">\n                    <template slot-scope=\"scope\">\n                        {{ new Date(scope.row.timestamp).toLocaleString() }}\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"操作\">\n                    <template slot-scope=\"scope\">\n                        <!-- 针对密钥生成邀请消息 -->\n                        <div v-if=\"scope.row.type === 'keygen_invite'\">\n                            <el-button type=\"success\" size=\"mini\" @click=\"handleKeygenInviteAccept(scope.row)\">\n                                接受\n                            </el-button>\n                            <el-button type=\"danger\" size=\"mini\" @click=\"handleKeygenInviteReject(scope.row)\">\n                                拒绝\n                            </el-button>\n                        </div>\n\n                        <!-- 针对签名邀请消息 -->\n                        <div v-else-if=\"scope.row.type === 'sign_invite'\">\n                            <el-button type=\"success\" size=\"mini\" @click=\"handleSignInviteAccept(scope.row)\">\n                                接受\n                            </el-button>\n                            <el-button type=\"danger\" size=\"mini\" @click=\"handleSignInviteReject(scope.row)\">\n                                拒绝\n                            </el-button>\n                        </div>\n\n                        <!-- 其他消息类型 -->\n                        <el-button type=\"text\" @click=\"showMessageDetail(scope.row)\">\n                            查看详情\n                        </el-button>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"状态\" width=\"120\">\n                    <template slot-scope=\"scope\">\n                        <el-tag v-if=\"scope.row.responded\" type=\"success\">已响应</el-tag>\n                        <el-tag v-else-if=\"isInviteMessage(scope.row.type)\" type=\"warning\">待响应</el-tag>\n                        <el-tag v-else type=\"info\">-</el-tag>\n                    </template>\n                </el-table-column>\n            </el-table>\n\n            <div v-if=\"notifications.length === 0\" class=\"empty-state\">\n                暂无通知消息\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { mpcApi, seApi } from '../services/api'\nimport { sendWSMessage, WS_MESSAGE_TYPES } from '../services/ws'\n\nexport default {\n    name: 'Notifications',\n    computed: {\n        ...mapGetters(['notifications'])\n    },\n    methods: {\n        clearNotifications() {\n            this.$store.commit('clearNotifications')\n        },\n\n        showMessageDetail(message) {\n            this.$alert(JSON.stringify(message.content, null, 2), '消息详情', {\n                closeOnClickModal: true\n            })\n        },\n\n        // 格式化消息类型显示\n        formatMsgType(type) {\n            const typeMap = {\n                'keygen_invite': '密钥生成邀请',\n                'keygen_params': '密钥生成参数',\n                'keygen_complete': '密钥生成完成',\n                'sign_invite': '签名邀请',\n                'sign_params': '签名参数',\n                'sign_complete': '签名完成',\n                'error': '错误'\n            }\n            return typeMap[type] || type\n        },\n\n        // 获取标签类型\n        getTagType(type) {\n            if (type.includes('invite')) return 'warning'\n            if (type.includes('complete')) return 'success'\n            if (type.includes('error')) return 'danger'\n            return 'info'\n        },\n\n        // 判断是否是需要响应的邀请消息\n        isInviteMessage(type) {\n            return type === 'keygen_invite' || type === 'sign_invite'\n        },\n\n        // 处理密钥生成邀请接受\n        async handleKeygenInviteAccept(notification) {\n            try {\n                // 获取当前用户的CPIC\n                const cpicResponse = await seApi.getCPIC()\n                const cpic = cpicResponse.data.cpic\n\n                // 发送接受响应\n                sendWSMessage({\n                    type: WS_MESSAGE_TYPES.KEYGEN_RESPONSE,\n                    session_key: notification.content.session_key,\n                    part_index: notification.content.part_index,\n                    cpic: cpic,\n                    accept: true,\n                    reason: ''\n                })\n\n                // 标记该通知已响应\n                this.markNotificationResponded(notification)\n                this.$message.success('已接受密钥生成邀请')\n            } catch (error) {\n                console.error('接受密钥生成邀请失败:', error)\n                this.$message.error('接受密钥生成邀请失败: ' + error.message)\n            }\n        },\n\n        // 处理密钥生成邀请拒绝\n        async handleKeygenInviteReject(notification) {\n            try {\n                // 发送拒绝响应\n                sendWSMessage({\n                    type: WS_MESSAGE_TYPES.KEYGEN_RESPONSE,\n                    session_key: notification.content.session_key,\n                    part_index: notification.content.part_index,\n                    cpic: '',\n                    accept: false,\n                    reason: '用户拒绝'\n                })\n\n                // 标记该通知已响应\n                this.markNotificationResponded(notification)\n                this.$message.info('已拒绝密钥生成邀请')\n            } catch (error) {\n                console.error('拒绝密钥生成邀请失败:', error)\n                this.$message.error('拒绝密钥生成邀请失败: ' + error.message)\n            }\n        },\n\n        // 处理签名邀请接受\n        async handleSignInviteAccept(notification) {\n            try {\n                // 获取当前用户的CPIC\n                const cpicResponse = await seApi.getCPIC()\n                const cpic = cpicResponse.data.cpic\n\n                // 发送接受响应\n                sendWSMessage({\n                    type: WS_MESSAGE_TYPES.SIGN_RESPONSE,\n                    session_key: notification.content.session_key,\n                    part_index: notification.content.part_index,\n                    cpic: cpic,\n                    accept: true,\n                    reason: ''\n                })\n\n                // 标记该通知已响应\n                this.markNotificationResponded(notification)\n                this.$message.success('已接受签名邀请')\n            } catch (error) {\n                console.error('接受签名邀请失败:', error)\n                this.$message.error('接受签名邀请失败: ' + error.message)\n            }\n        },\n\n        // 处理签名邀请拒绝\n        async handleSignInviteReject(notification) {\n            try {\n                // 发送拒绝响应\n                sendWSMessage({\n                    type: WS_MESSAGE_TYPES.SIGN_RESPONSE,\n                    session_key: notification.content.session_key,\n                    part_index: notification.content.part_index,\n                    cpic: '',\n                    accept: false,\n                    reason: '用户拒绝'\n                })\n\n                // 标记该通知已响应\n                this.markNotificationResponded(notification)\n                this.$message.info('已拒绝签名邀请')\n            } catch (error) {\n                console.error('拒绝签名邀请失败:', error)\n                this.$message.error('拒绝签名邀请失败: ' + error.message)\n            }\n        },\n\n        // 标记通知已响应\n        markNotificationResponded(notification) {\n            const index = this.notifications.findIndex(n =>\n                n.timestamp === notification.timestamp &&\n                n.type === notification.type\n            )\n\n            if (index !== -1) {\n                // Vue 无法直接修改数组元素的属性，需要用 this.$set\n                this.$set(this.notifications[index], 'responded', true)\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.notifications-container {\n    padding: 20px;\n}\n\n.empty-state {\n    text-align: center;\n    padding: 50px 0;\n    color: #909399;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Notifications.vue?vue&type=template&id=5ecd6a2c&scoped=true\"\nimport script from \"./Notifications.vue?vue&type=script&lang=js\"\nexport * from \"./Notifications.vue?vue&type=script&lang=js\"\nimport style0 from \"./Notifications.vue?vue&type=style&index=0&id=5ecd6a2c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ecd6a2c\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Login from '../views/Login.vue'\nimport Register from '../views/Register.vue'\nimport Dashboard from '../views/Dashboard.vue'\nimport Users from '../views/Users.vue'\nimport KeyGen from '../views/KeyGen.vue'\nimport Sign from '../views/Sign.vue'\nimport Notifications from '../views/Notifications.vue'\nimport store from '../store'\n\nVue.use(VueRouter)\n\nconst routes = [\n    {\n        path: '/',\n        redirect: '/dashboard'\n    },\n    {\n        path: '/login',\n        name: 'Login',\n        component: Login,\n        meta: { requiresAuth: false }\n    },\n    {\n        path: '/register',\n        name: 'Register',\n        component: Register,\n        meta: { requiresAuth: false }\n    },\n    {\n        path: '/dashboard',\n        name: 'Dashboard',\n        component: Dashboard,\n        meta: { requiresAuth: true }\n    },\n    {\n        path: '/users',\n        name: 'Users',\n        component: Users,\n        meta: { requiresAuth: true, requiresAdmin: true }\n    },\n    {\n        path: '/keygen',\n        name: 'KeyGen',\n        component: KeyGen,\n        meta: { requiresAuth: true, requiresCoordinatorOrAdmin: true }\n    },\n    {\n        path: '/sign',\n        name: 'Sign',\n        component: Sign,\n        meta: { requiresAuth: true, requiresCoordinatorOrAdmin: true }\n    },\n    {\n        path: '/notifications',\n        name: 'Notifications',\n        component: Notifications,\n        meta: { requiresAuth: true }\n    }\n]\n\nconst router = new VueRouter({\n    mode: 'hash', // Electron 环境下使用 hash 模式\n    base: process.env.BASE_URL,\n    routes\n})\n\n// 全局路由守卫\nrouter.beforeEach((to, from, next) => {\n    const requiresAuth = to.matched.some(record => record.meta.requiresAuth)\n    const requiresAdmin = to.matched.some(record => record.meta.requiresAdmin)\n    const requiresCoordinatorOrAdmin = to.matched.some(record => record.meta.requiresCoordinatorOrAdmin)\n\n    // 如果需要身份验证且未登录，则重定向到登录页面\n    if (requiresAuth && !store.getters.isLoggedIn) {\n        next('/login')\n    }\n    // 如果需要管理员权限但当前用户不是管理员\n    else if (requiresAdmin && !store.getters.isAdmin) {\n        next('/dashboard')\n    }\n    // 如果需要协调者或管理员权限，但当前用户既不是协调者也不是管理员\n    else if (requiresCoordinatorOrAdmin && !(store.getters.isCoordinator || store.getters.isAdmin)) {\n        next('/dashboard')\n    }\n    else {\n        next()\n    }\n})\n\nexport default router","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport axios from 'axios'\n\nVue.config.productionTip = false\n\n// 使用ElementUI组件库\nVue.use(ElementUI)\n\n// 配置axios\naxios.defaults.baseURL = 'http://localhost:8080'\nVue.prototype.$axios = axios\n\n// 添加响应拦截器处理401错误\naxios.interceptors.response.use(\n    response => {\n        return response\n    },\n    error => {\n        if (error.response && error.response.status === 401) {\n            // 清除token\n            store.commit('clearToken')\n            // 重定向到登录页\n            router.push('/login')\n            return Promise.reject(error)\n        }\n        return Promise.reject(error)\n    }\n)\n\nnew Vue({\n    router,\n    store,\n    render: h => h(App)\n}).$mount('#app') ","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=1acadbea&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=0e07ba8c&prod&scoped=true&lang=css\"","import axios from 'axios'\nimport store from '../store'\n\n// API基础URL\nconst API_URL = 'http://localhost:8080'\nconst MPC_URL = 'http://localhost:8088'\n\n// 创建axios实例\nconst apiClient = axios.create({\n    baseURL: API_URL,\n    timeout: 10000\n})\n\n// axios请求拦截器\napiClient.interceptors.request.use(\n    config => {\n        const token = localStorage.getItem('token')\n        if (token) {\n            // 如果token以Bearer开头，则去掉前缀，只发送裸token\n            config.headers['Authorization'] = token.startsWith('Bearer ') ? token.substring(7) : token\n        }\n        return config\n    },\n    error => {\n        console.error('请求拦截错误:', error)\n        return Promise.reject(error)\n    }\n)\n\n// axios响应拦截器\napiClient.interceptors.response.use(\n    response => response,\n    error => {\n        if (error.response) {\n            // 处理401认证错误\n            if (error.response.status === 401) {\n                console.error('认证失败，请重新登录')\n                // 可选：自动登出并跳转到登录页面\n                if (store && store.dispatch) {\n                    store.dispatch('logout')\n                    // 使用延迟以确保状态更新完成\n                    setTimeout(() => {\n                        window.location.href = '/#/login'\n                    }, 100)\n                }\n            }\n\n            // 处理其他错误\n            console.error('API错误:', error.response.status, error.response.data)\n        } else if (error.request) {\n            console.error('请求无响应:', error.request)\n        } else {\n            console.error('请求配置错误:', error.message)\n        }\n        return Promise.reject(error)\n    }\n)\n\n// 设置请求头 - 确保发送裸token\nconst getAuthHeader = () => {\n    const token = localStorage.getItem('token')\n    return {\n        headers: {\n            'Authorization': token && token.startsWith('Bearer ') ? token.substring(7) : token\n        }\n    }\n}\n\n// 用户API\nexport const userApi = {\n    // 用户注册\n    register(userData) {\n        return apiClient.post(`/user/register`, userData)\n    },\n\n    // 用户登录\n    login(credentials) {\n        return apiClient.post(`/user/login`, credentials)\n    },\n\n    // 获取用户列表 (仅管理员)\n    getUsers() {\n        return apiClient.get(`/user/admin/users`)\n    },\n\n    // 更新用户角色 (仅管理员)\n    updateUserRole(username, role) {\n        return apiClient.put(`/user/admin/users/${username}/role`, { role })\n    }\n}\n\n// 密钥生成API\nexport const keygenApi = {\n    // 创建密钥生成会话\n    createSession(initiator) {\n        return apiClient.get(`/keygen/create/${initiator}`)\n    },\n\n    // 获取可用参与者\n    getAvailableUsers() {\n        return apiClient.get(`/keygen/users`)\n    }\n}\n\n// 签名API\nexport const signApi = {\n    // 创建签名会话\n    createSession(initiator) {\n        return apiClient.get(`/sign/create/${initiator}`)\n    },\n\n    // 获取可用签名参与者\n    getAvailableUsers(address) {\n        return apiClient.get(`/sign/users/${address}`)\n    }\n}\n\n// 安全芯片API\nexport const seApi = {\n    // 获取CPIC\n    getCPIC() {\n        return axios.get(`${MPC_URL}/api/v1/mpc/cplc`)\n    },\n\n    // 创建安全芯片记录\n    createSE(data) {\n        return apiClient.post(`/se/create`, data)\n    }\n}\n\n// MPC服务API\nexport const mpcApi = {\n    // 密钥生成\n    keyGen(data) {\n        return axios.post(`${MPC_URL}/api/v1/mpc/keygen`, data)\n    },\n\n    // 签名\n    sign(data) {\n        return axios.post(`${MPC_URL}/api/v1/mpc/sign`, data)\n    }\n} ","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=5e4ec115&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeyGen.vue?vue&type=style&index=0&id=33adc480&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sign.vue?vue&type=style&index=0&id=39df3038&prod&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=30f5da90&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=style&index=0&id=5ecd6a2c&prod&scoped=true&lang=css\""],"sourceRoot":""}