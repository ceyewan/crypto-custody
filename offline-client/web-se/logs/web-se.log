{"level":"info","time":"2025-04-25T15:01:30.940+0800","caller":"web-se/main.go:28","msg":"系统启动"}
{"level":"info","time":"2025-04-25T15:01:30.941+0800","caller":"web-se/main.go:29","msg":"配置加载成功","port":"8080","debug":true,"log_file":"web-se.log"}
{"level":"debug","time":"2025-04-25T15:01:30.941+0800","caller":"web-se/main.go:37","msg":"Gin设置为调试模式"}
{"level":"info","time":"2025-04-25T15:01:30.941+0800","caller":"web-se/main.go:65","msg":"服务器启动","port":"8080"}
{"level":"info","time":"2025-04-25T15:01:34.551+0800","caller":"controllers/mpc.go:130","msg":"服务未初始化，尝试初始化"}
{"level":"info","time":"2025-04-25T15:01:34.552+0800","caller":"services/security.go:22","msg":"初始化安全芯片服务"}
{"level":"debug","time":"2025-04-25T15:01:34.552+0800","caller":"services/security.go:30","msg":"创建卡片读取器"}
{"level":"debug","time":"2025-04-25T15:01:34.563+0800","caller":"services/security.go:38","msg":"连接读卡器"}
{"level":"debug","time":"2025-04-25T15:01:34.564+0800","caller":"services/security.go:46","msg":"选择安全芯片Applet"}
{"level":"info","time":"2025-04-25T15:01:34.566+0800","caller":"services/security.go:54","msg":"安全芯片服务初始化成功"}
{"level":"info","time":"2025-04-25T15:01:34.566+0800","caller":"services/mpc.go:21","msg":"创建MPC服务"}
{"level":"info","time":"2025-04-25T15:01:34.566+0800","caller":"controllers/mpc.go:42","msg":"MPC控制器初始化成功"}
{"level":"info","time":"2025-04-25T15:01:34.567+0800","caller":"controllers/mpc.go:186","msg":"接收到签名请求","parties":"1,2,3","data":"a487a914d415e5b6e9cae6859fead20cfdf9732bf1c06e4fddc446a8997a45d6","filename":"keygen_test_1.json","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"controllers/mpc.go:192","msg":"签名请求详情","encrypted_key_length":"6.27 KB","signature_length":"71 B"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/mpc.go:140","msg":"开始消息签名过程","parties":"1,2,3","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","filename":"keygen_test_1.json"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/mpc.go:159","msg":"临时文件路径","path":"temp/keygen_test_1.json"}
{"level":"info","time":"2025-04-25T15:01:34.567+0800","caller":"services/mpc.go:170","msg":"从安全芯片读取密钥","userName":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/security.go:125","msg":"准备从安全芯片读取数据","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/security.go:144","msg":"用户名字节","userBytes":"1160130875FDA0812C99C5E3F1A03516471A6370C4F97129B221938EB4763E63"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/security.go:145","msg":"地址字节","addrBytes":"EC1D3D9ADF98B1D7ED9A44F2D4FC6E007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.567+0800","caller":"services/security.go:148","msg":"调用安全芯片读取数据","signature_length":"71 B"}
{"level":"error","time":"2025-04-25T15:01:34.580+0800","caller":"services/security.go:152","msg":"从安全芯片读取数据失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*SecurityService).ReadData\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/security.go:152\nweb-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:171\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.580+0800","caller":"services/mpc.go:173","msg":"从安全芯片读取密钥失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:173\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"debug","time":"2025-04-25T15:01:34.580+0800","caller":"services/mpc.go:163","msg":"清理临时文件","path":"temp/keygen_test_1.json"}
{"level":"warn","time":"2025-04-25T15:01:34.580+0800","caller":"services/mpc.go:165","msg":"删除临时文件失败","error":"remove temp/keygen_test_1.json: no such file or directory","path":"temp/keygen_test_1.json"}
{"level":"error","time":"2025-04-25T15:01:34.580+0800","caller":"controllers/mpc.go:208","msg":"签名失败","error":"从安全芯片读取密钥失败: 签名无效 (状态码: 0x6982)","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","stacktrace":"web-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:208\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.580+0800","caller":"middleware/logger.go:47","msg":"API请求","method":"POST","uri":"/api/v1/mpc/sign","ip":"::1","status":500,"latency":"28.469417ms","stacktrace":"main.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:47\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"info","time":"2025-04-25T15:01:34.582+0800","caller":"controllers/mpc.go:186","msg":"接收到签名请求","parties":"1,2,3","data":"a487a914d415e5b6e9cae6859fead20cfdf9732bf1c06e4fddc446a8997a45d6","filename":"keygen_test_2.json","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"controllers/mpc.go:192","msg":"签名请求详情","encrypted_key_length":"6.27 KB","signature_length":"70 B"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/mpc.go:140","msg":"开始消息签名过程","parties":"1,2,3","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","filename":"keygen_test_2.json"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/mpc.go:159","msg":"临时文件路径","path":"temp/keygen_test_2.json"}
{"level":"info","time":"2025-04-25T15:01:34.582+0800","caller":"services/mpc.go:170","msg":"从安全芯片读取密钥","userName":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/security.go:125","msg":"准备从安全芯片读取数据","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/security.go:144","msg":"用户名字节","userBytes":"1160130875FDA0812C99C5E3F1A03516471A6370C4F97129B221938EB4763E63"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/security.go:145","msg":"地址字节","addrBytes":"EC1D3D9ADF98B1D7ED9A44F2D4FC6E007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.582+0800","caller":"services/security.go:148","msg":"调用安全芯片读取数据","signature_length":"70 B"}
{"level":"error","time":"2025-04-25T15:01:34.595+0800","caller":"services/security.go:152","msg":"从安全芯片读取数据失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*SecurityService).ReadData\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/security.go:152\nweb-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:171\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.595+0800","caller":"services/mpc.go:173","msg":"从安全芯片读取密钥失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:173\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"debug","time":"2025-04-25T15:01:34.595+0800","caller":"services/mpc.go:163","msg":"清理临时文件","path":"temp/keygen_test_2.json"}
{"level":"warn","time":"2025-04-25T15:01:34.595+0800","caller":"services/mpc.go:165","msg":"删除临时文件失败","error":"remove temp/keygen_test_2.json: no such file or directory","path":"temp/keygen_test_2.json"}
{"level":"error","time":"2025-04-25T15:01:34.595+0800","caller":"controllers/mpc.go:208","msg":"签名失败","error":"从安全芯片读取密钥失败: 签名无效 (状态码: 0x6982)","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","stacktrace":"web-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:208\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.595+0800","caller":"middleware/logger.go:47","msg":"API请求","method":"POST","uri":"/api/v1/mpc/sign","ip":"::1","status":500,"latency":"13.28ms","stacktrace":"main.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:47\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"info","time":"2025-04-25T15:01:34.597+0800","caller":"controllers/mpc.go:186","msg":"接收到签名请求","parties":"1,2,3","data":"a487a914d415e5b6e9cae6859fead20cfdf9732bf1c06e4fddc446a8997a45d6","filename":"keygen_test_3.json","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"controllers/mpc.go:192","msg":"签名请求详情","encrypted_key_length":"6.27 KB","signature_length":"72 B"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/mpc.go:140","msg":"开始消息签名过程","parties":"1,2,3","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","filename":"keygen_test_3.json"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/mpc.go:159","msg":"临时文件路径","path":"temp/keygen_test_3.json"}
{"level":"info","time":"2025-04-25T15:01:34.597+0800","caller":"services/mpc.go:170","msg":"从安全芯片读取密钥","userName":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/security.go:125","msg":"准备从安全芯片读取数据","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/security.go:144","msg":"用户名字节","userBytes":"1160130875FDA0812C99C5E3F1A03516471A6370C4F97129B221938EB4763E63"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/security.go:145","msg":"地址字节","addrBytes":"EC1D3D9ADF98B1D7ED9A44F2D4FC6E007F5BE8A3"}
{"level":"debug","time":"2025-04-25T15:01:34.597+0800","caller":"services/security.go:148","msg":"调用安全芯片读取数据","signature_length":"72 B"}
{"level":"error","time":"2025-04-25T15:01:34.610+0800","caller":"services/security.go:152","msg":"从安全芯片读取数据失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*SecurityService).ReadData\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/security.go:152\nweb-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:171\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.610+0800","caller":"services/mpc.go:173","msg":"从安全芯片读取密钥失败","error":"签名无效 (状态码: 0x6982)","stacktrace":"web-se/services.(*MPCService).SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/services/mpc.go:173\nweb-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:197\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"debug","time":"2025-04-25T15:01:34.610+0800","caller":"services/mpc.go:163","msg":"清理临时文件","path":"temp/keygen_test_3.json"}
{"level":"warn","time":"2025-04-25T15:01:34.610+0800","caller":"services/mpc.go:165","msg":"删除临时文件失败","error":"remove temp/keygen_test_3.json: no such file or directory","path":"temp/keygen_test_3.json"}
{"level":"error","time":"2025-04-25T15:01:34.610+0800","caller":"controllers/mpc.go:208","msg":"签名失败","error":"从安全芯片读取密钥失败: 签名无效 (状态码: 0x6982)","username":"test_user","address":"0xeC1d3d9aDF98B1d7ED9A44F2D4FC6e007F5BE8A3","stacktrace":"web-se/controllers.SignMessage\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/controllers/mpc.go:208\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"level":"error","time":"2025-04-25T15:01:34.610+0800","caller":"middleware/logger.go:47","msg":"API请求","method":"POST","uri":"/api/v1/mpc/sign","ip":"::1","status":500,"latency":"13.199834ms","stacktrace":"main.main.LoggerMiddleware.func2\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/logger.go:47\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.main.ErrorHandler.func1\n\t/Users/harrick/CodeField/crypto-custody/offline-client/web-se/middleware/error.go:12\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/harrick/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
